# lasRpipeline

Provides wrapper functions for parallel processing using lasR of typical forestry lidar workflow, from raw point cloud to tree segmentation.

Please install [lasR](https://github.com/r-lidar/lasR)

## Usage
```{r}

if(!require("lasR")) install.packages('lasR', repos = 'https://r-lidar.r-universe.dev')
if(!require("devtools"))  install.packages("devtools")
if(!require("lasRpipeline")) devtools::install_github("fpirotti/lasRpipeline")
# install.packages("devtools")

# testFile <- system.file("extdata", "BL5_UTM_32_ort_0021.laz", package = "lasRpipeline")

## just define input files and output directory - the processing will check if 
## intermediate steps have already been taken care of and proceed to create a 
## canopy fuel and topography 
f <- list.files("/archivio/shared/geodati/las/fvg", pattern="(?i)\\.la(s|z)$", full.names = T )
odir <- "/archivio/shared/geodati/las/fvg/outdir/norm"
  
process<-function(){
  if(hasGroundPoints(f) < 0.00000000001){
    message_log("Please classify ground points with your favorite method before continuing. ") 
    stop("No ground class")
  }  
  
  lasR::set_parallel_strategy(lasR::nested(ncores = 4L, ncores2 = 2L))
  message_log("Normalize") 
  normalize(f, odir)
  message_log("Reference GRID, might be different CRS. ") 
  grid <- terra::rast("../wildfire/input/AT-IT_ScottBurganFuelMapClassV2.tif")
  
}


process()
 


 
```

## Acknowledgements

Part of this work is supported by the Wildfire CE Interreg Project, grant number CE0200934.
